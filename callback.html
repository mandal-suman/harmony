<!DOCTYPE html>
<html>

<head>
    <title>Authentication Callback</title>
    <script>
        // Extract token from URL hash and pass it to the main window
        window.addEventListener('DOMContentLoaded', () => {
            const hash = window.location.hash.substring(1);
            const params = new URLSearchParams(hash);
            const token = params.get('access_token');

            if (token) {
                window.opener.postMessage({
                    type: 'SPOTIFY_AUTH',
                    token: token
                }, window.opener.location.origin);
                window.close();
            } else {
                window.opener.postMessage({
                    type: 'SPOTIFY_AUTH_ERROR'
                }, window.opener.location.origin);
                window.close();
            }
        });
    </script>
</head>

<body>
    <p>Processing authentication...</p>
</body>

</html>